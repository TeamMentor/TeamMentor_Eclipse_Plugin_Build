package test.maven.swt.bot;

import static org.junit.Assert.*;

import org.eclipse.core.resources.IProject;
import org.eclipse.core.resources.IWorkspace;
import org.eclipse.core.resources.IWorkspaceRunnable;
import org.eclipse.core.resources.ResourcesPlugin;
import org.eclipse.core.runtime.CoreException;
import org.eclipse.core.runtime.IProgressMonitor;
import org.eclipse.core.runtime.NullProgressMonitor;
import org.eclipse.swtbot.eclipse.finder.SWTBotEclipseFinderPlugin;
import org.eclipse.swtbot.eclipse.finder.SWTWorkbenchBot;
import org.eclipse.swtbot.eclipse.finder.finders.WorkbenchContentsFinder;
import org.eclipse.swtbot.helpers.SWTBotHelper;
import org.eclipse.swtbot.swt.finder.junit.SWTBotJunit4ClassRunner;
import org.eclipse.swtbot.swt.finder.widgets.SWTBotButton;
import org.eclipse.swtbot.swt.finder.widgets.SWTBotTree;
import org.eclipse.swtbot.swt.finder.widgets.SWTBotTreeItem;
import org.eclipse.ui.IWorkbench;
import org.eclipse.ui.PartInitException;
import org.junit.BeforeClass;
import org.junit.Test;
import org.junit.runner.RunWith;

@RunWith(SWTBotJunit4ClassRunner.class)
public class OpenTestProjectsTest 
{

	protected static SWTWorkbenchBot bot;
	
	@BeforeClass
	public final static void beforeClass() throws Exception 
	{				
		bot = new SWTWorkbenchBot();
		assertNotNull(bot);		
	}
	
	@Test
	public void open_Test_Project() 
	{		
		String projectPath = "/Users/zen/Fortify-Plugin/Eclipses/workspaces/test_proj";
				
		new SWTBotHelper(bot).openProject(projectPath,1)
							 .addDummyTaskToWorkspace();		
		

		bot.captureScreenshot("screenshots/open_Test_Project.jpeg");
	}

	@Test
	public void open_Plugin_Project() 
	{		
		String projectPath = "/Users/zen/Fortify-Plugin/TeamMentor_Eclipse_Plugin";
				
		new SWTBotHelper(bot).openProject(projectPath, 3)
							 .addDummyTaskToWorkspace();//, "TeamMentor.Eclipse.PlugIn.Fortify");		
		
		bot.captureScreenshot("screenshots/open_Test_Project.jpeg");
		
		IProject[] projects = ResourcesPlugin.getWorkspace().getRoot().getProjects();
		for(IProject project : projects)
			System.out.println("Current projects: " + project.getName());
	}

}
